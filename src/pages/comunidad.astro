---
import Layout from "../layouts/Layout.astro";
import "../styles/global.css";

interface RandomUser {
    name: {
        first: string;
        last: string;
    };
    picture: {
        large: string;
    };
}

interface Explorer extends RandomUser {
    testimonial: string;
}

// Fetch data from RandomUser API
const response = await fetch(
    "https://randomuser.me/api/?results=6&nat=es,mx,us",
);
const data = await response.json();
const users: RandomUser[] = data.results;

const testimonials = [
    "¡Increíble experiencia! Los animatrónicos parecen reales, es como viajar en el tiempo.",
    "El T-Rex fue aterradoramente genial. ¡Definitivamente volveré pronto con toda la familia!",
    "La zona de herbívoros es perfecta para los niños. Aprendieron mucho y se divirtieron.",
    "La mejor aventura de mi vida. Me sentí en la película desde que crucé las puertas.",
    "La comida en el restaurante temático estaba deliciosa y los precios son muy razonables.",
    "Muy bien organizado y seguro. Las medidas de seguridad me hicieron sentir muy tranquilo.",
];

// Combine users with testimonials
const explorers: Explorer[] = users.map((user, index) => ({
    ...user,
    testimonial: testimonials[index % testimonials.length],
}));
---

<Layout title="Comunidad | DinoPark">
    <div class="bg-white min-h-screen">
        <!-- Hero Section -->
        <section class="max-w-7xl mx-auto px-4 py-16 md:py-24 text-center">
            <span
                class="text-green-600 font-bold tracking-widest uppercase text-sm mb-4 block"
                >Nuestros Visitantes</span
            >
            <h1
                class="text-4xl md:text-5xl font-black text-[#1a2e05] mb-6 uppercase tracking-tight italic font-[Impact]"
            >
                Comunidad <span class="text-green-600">DinoPark</span>
            </h1>
            <p
                class="text-xl text-stone-600 max-w-2xl mx-auto font-light leading-relaxed"
            >
                Descubre las historias y experiencias de nuestros valientes
                exploradores. <br />Únete a la aventura que ha cautivado a
                miles.
            </p>
        </section>

        <!-- Grid  de opiniones-->
        <section class="max-w-7xl mx-auto px-4 pb-24">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {
                    explorers.map((explorer) => (
                        <article class="bg-white border border-stone-200 rounded-2xl p-8 shadow-sm hover:shadow-2xl transition-all duration-300 flex flex-col items-center text-center group hover:-translate-y-1">
                            <div class="relative w-28 h-28 mb-6">
                                <img
                                    src={explorer.picture.large}
                                    alt={`${explorer.name.first} ${explorer.name.last}`}
                                    class="w-full h-full object-cover rounded-full border-4 border-white shadow-md group-hover:scale-105 transition-transform duration-300"
                                />
                                <div class="absolute bottom-0 right-0 bg-green-600 p-2 rounded-full text-white shadow-lg border-2 border-white">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="h-5 w-5"
                                        fill="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            d="M14.017 21L14.017 18C14.017 16.8954 13.1216 16 12.017 16H9C9.00001 7.13263 14.3637 5.23932 16.9088 4.29548L15.9144 2.30231C11.9649 3.99309 6.00001 6.38885 6.00001 16H8.00001C9.10457 16 10 16.8954 10 18V21H14.017ZM24.017 21L24.017 18C24.017 16.8954 23.1216 16 22.017 16H19C19 7.13263 24.3637 5.23932 26.9088 4.29548L25.9144 2.30231C21.9649 3.99309 16 6.38885 16 16H18C19.1046 16 20 16.8954 20 18V21H24.017Z"
                                            transform="translate(-4 0)"
                                        />
                                    </svg>
                                </div>
                            </div>

                            <h3 class="text-xl font-bold text-[#1a2e05] mb-1 capitalize font-[Impact] tracking-wide">
                                {explorer.name.first} {explorer.name.last}
                            </h3>
                            <div class="flex items-center gap-1 mb-4">
                                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse" />
                                <p class="text-xs text-green-700 font-bold uppercase tracking-wider">
                                    Explorador Verificado
                                </p>
                            </div>

                            <p class="text-stone-600 italic leading-relaxed text-lg">
                                "{explorer.testimonial}"
                            </p>
                        </article>
                    ))
                }
            </div>
        </section>
    </div>
</Layout>
